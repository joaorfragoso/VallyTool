<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/styles/reset.css">
	<title>VallyTool</title>
	<style>
		.botoes-menu li:nth-child(2) {
			width: 150px;
		}

		.item-div {
			position: relative;
			grid-template-columns: auto max-content max-content;
			column-gap: 10px;
		}
		.item-div .historico-botao {
			background: transparent url(/images/folder-solid.svg) no-repeat center;
			height: 80%;
			aspect-ratio: 1/1;
			cursor: pointer;
			border: 0;
			justify-self: flex-end;
		}
		.lista-div .novo-item {
			position: relative;
			display: block;
			width: 100%;
			min-height: 2.5em;
			padding: 0 8px;
			box-sizing: border-box;
			border-radius: 4px;
			background-color: #2FC891;
			color: white;
			font-weight: 300;
			line-height: 2.5em;
			cursor: pointer;
		}
		.criarturma-botao {
			width: 100%;
			height: 100%;
			border-radius: 4px;
			box-sizing: border-box;
			padding: 0 8px;
			
		}
		.turmanova {
			position: relative;
			display: block;
			width: 100%;
			height: 100%;
			padding: 0 8px;
			box-sizing: border-box;
			border-radius: 0 0 4px 4px;
			box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.4);
			background-color: rgb(52, 224, 162);
		}
		.turmanova input {
			width: 60%;
			appearance: none;
			border: 0;
			outline: 0;
			background-color: transparent;
			font-size: 1em;
		}
		/*Tirar as Setas do input number*/
		input::-webkit-outer-spin-button, input::-webkit-inner-spin-button {
		  -webkit-appearance: none;
		  margin: 0;
		}
		input[type=number] {
		  -moz-appearance: textfield;
		}
		.criar-botao {
			position: absolute;
			right: 8px;
			top: 50%;
			transform: translatey(-50%);
			width: 90px;
			height: 2em;
			background-color: #2FC891;
			font-family: inherit;
			font-weight: 300;
			font-size: 14px;
			color: white;
			border: 0;
			border-radius: 4px;
			cursor: pointer;
			box-shadow: 0 0px 4px 2px rgba(0, 0, 0, 0.25);
		}
		.criar-botao:hover {
			background-color: #35E2A4;
		}
		.novaturma-input {
			font-family: inherit;
			font-weight: 300;
			color: white;
			border: 0;
			outline: 0;
			background-color: transparent;
			font-size: 16px;
			cursor: pointer;
		}
		.novaturma-input::placeholder {
			color: white;
			opacity: 1;
		}
		.novaturma-input:focus::placeholder {
			opacity: 0;
		}
	</style>
	<link rel="stylesheet" href="/styles/estrutura.css">
	<link rel="stylesheet" href="/styles/common.css">
	<link rel="stylesheet" href="/styles/sop.css">
</head>
<body>
	<header th:replace="common/base::cabecalho_logado"></header>
	<div class="main">
		<div class="tela">
			<div th:replace="common/base::menu_sop"></div>
			<div class="aba">
				<div class="fechar-botao"></div>
				<form class="pesquisar-form" th:action="@{/turmas}">
					<input name="search" type="text" placeholder="Buscar Turma" class="pesquisar-input" autocomplete="off">
					<button value="submit" class="pesquisar-botao"></button>
				</form>
				<div class="lista-div">
					<div class="novo-item" onclick="this.getElementsByClassName('novaturma-input')[0].focus()">
						<form method="post" th:action="@{turmas}" th:object="${turma}">
							<input name="codigo" type="text" pattern="[0-9]{3}" class="novaturma-input" id="novaturma-input" placeholder="Nova Turma" maxlength="3" oninput="bloqueiaCaractere(this)" autocomplete="off" required>
							<button class="criar-botao oculto">Criar</button>
						</form>
					</div>
					<div th:each="turma: ${turmas}" class="item-div">
						<span th:text="${turma.codigo}" class="turma"></span>
						<button class="historico-botao" onclick="abrirJanela('')"></button>
						<button class="editar-botao" onclick="abrirJanela('')"></button>
					</div>
				</div>
				<button class="botao-verde">Emitir Resultado</button>
			</div>
		</div>
		<div th:if="${param.error}" th:replace="common/base::aviso"></div>
	</div>
</body>
<script src="/modules/menu.js"></script>
<script src="/modules/aviso.js"></script>
<script src="/modules/janelaFunctions.js"></script>
<script>
	function criarTurma(element) {
		element.nextSibling.nextSibling.classList.toggle("oculto");
	}
	const bloqueiaCaractere = (function () {
	    let ValueAnterior = "";
	    return function (element) {
        	if (isNaN(event.data)) {element.value = ValueAnterior}
	        ValueAnterior = element.value;
	    }
	})()
	
	//Fazer aparecer o botão de submit;
	const novaTurmaInput = document.getElementById("novaturma-input");
	novaTurmaInput.addEventListener("focusin", function(){
		this.nextElementSibling.classList.remove("oculto");
	})
	//Fazer desaparecer o botão de submit caso não tenha nenhum valor no input;
	novaTurmaInput.addEventListener("focusout", function(){
		if (novaTurmaInput.value.length === 0) {
			this.nextElementSibling.classList.add("oculto");
		} 
	})
</script>
</html>